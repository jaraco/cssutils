`Index </index.txt>`_

=================
version migration
=================
:version: $Id$

.. contents::


0.9.5 incompatible changes
==========================
cssutils 0.9.5 introduced some minor incompatible API changes. Reason for most changes is that for most cases the new default behaviour makes more sense.

parsing
-------
``parse()`` is *DEPRECATED* in favour of ``parseFile()``. Both methods are still available but ``parse`` will be removed for cssutils 1.0.

All ``parse*`` functions (or ``CSSParser.parse*`` methods) do raise errors from 0.9.5final.

iterating over ``CSSStyleDeclaration``
--------------------------------------
Iterating over ``css.CSSStyleDelcaration`` now yields *effective* properties only and not *all* properties set in the declaration. To retrieve *all* properties use ``CSSStyleDeclaration.getProperties(all=True)``.

example
~~~~~~~
iterating over a CSSStyleDeclaration with ``cssText='color: red; c\olor: green'``

OLD:
    yielded two Property objects with the values ``red`` and ``green``.
NEW since 0.9.5:
    yields one Property only (the actual one used) which has the value ``green``.


``Property.name`` attribute
---------------------------
``Property.name`` until now hold the *literal* value (e.g. ``c\olor`` of a properties name. Now it holds the *normalized* name. ``Property.normalname`` is therefor *DEPRECATED*. To access the unnormalized (literal) name use the new readonly property ``Property.literalname``.

example
~~~~~~~

::

        p = Property(ur'c\olor', 'red')

OLD
    ::

        p.name == ur'c\olor'
        p.normalname == ur'color' # now DEPRECATED

NEW since 0.9.5
    ::

        p.name == ur'color'
        p.literalname == ur'c\olor'

``Property.priority`` attribute
-------------------------------
The value of ``Property.priority`` (or ``CSSStyleDeclatation.getPropertyPriority(p)``) is now ``important`` without a leading ``!`` as defined in the CSS specs.

(``Property._normalpriority`` has been removed, the normalized value that was available here is now in ``Property.priority``. The literal priority value is available in ``Property.literalproperty`` now (analog to ``Property.literalname``). All these values probably should not be used by client code anyway but may be helpful when using CSS hacks.)

example
~~~~~~~
::

    p = Property(u'color', 'red', u'!IMPOR\\TANT')

OLD
    ::

        p.priority == u'!IMPOR\\TANT'
        p._normalpriority == u'!important' # now REMOVED!

NEW since 0.9.5
    ::

        p.priority == u'important'
        p.literalpriority == u'IMPOR\\TANT'

``CSSStyleSheet.replaceUrls(replacer)``
---------------------------------------
Since 0.9.5b1 ``replaceUrls`` has been moved from a method of ``CSSStyleSheet`` to a utility function in cssutils directly.

example
~~~~~~~
::

        def replacer(url):
            "returns new URL"

        sheet = cssutils.parseUrl('http://example.com/test.css')


OLD
    ::

        sheet.replaceUrls(replacer)

NEW since 0.9.5b1
    ::

        cssutils.replaceUrls(sheet, replacer)

